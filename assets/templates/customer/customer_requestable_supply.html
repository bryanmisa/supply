{% extends "base/base.html" %}

{% block content %}
<div class="card mt-4 mb-4 shadow-sm" style="max-width: 700px; margin: 0 auto;">
    <div class="card-header bg-primary text-white">
        <h2 class="mb-0" style="font-size: 1.5rem;">Active Supply Items</h2>
    </div>
    <div class="card-body">
        <ul class="list-group list-group-flush">
            {% for item in supply_items %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span class="fw-semibold">{{ item.name }}</span>
                    <button type="button" class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#requestModal{{ item.id }}">
                        Request
                    </button>
                </li>

                <!-- Modal -->
                <div class="modal fade" id="requestModal{{ item.id }}" tabindex="-1" aria-labelledby="requestModalLabel{{ item.id }}" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <form method="post" action="{% url 'supply:request_supply_item' item.id %}">
                        {% csrf_token %}
                        <div class="modal-header">
                          <h5 class="modal-title" id="requestModalLabel{{ item.id }}">Request {{ item.name }}</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                          <div class="mb-3">
                            <label for="quantity{{ item.id }}" class="form-label">Quantity</label>
                            <input type="number" min="1" class="form-control" id="quantity{{ item.id }}" name="quantity" required>
                          </div>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                          <button type="submit" class="btn btn-primary">Submit Request</button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
            {% empty %}
                <li class="list-group-item text-center text-muted">
                    No active supply items available.
                </li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock content %}